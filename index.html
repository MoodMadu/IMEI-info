<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrisaTel | Vue.js Edition</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Favicon Link -->
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/moodmadu/imei-info/main/favicon-brisanet.png">

    <!-- Estilos Globais -->
    <style>
        body {
            font-family: 'Ubuntu', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }
        [v-cloak] {
            display: none;
        }
        /* Animações de transição para os painéis */
        .fade-enter-active,
        .fade-leave-active {
            transition: opacity 0.3s ease;
        }
        .fade-enter-from,
        .fade-leave-to {
            opacity: 0;
        }
        .faq-answer, .note-content {
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
        }
        .faq-answer.open {
            max-height: 500px;
        }
        .note-color-palette {
            display: flex;
            gap: 0.5rem;
        }
        .note-color-swatch {
            width: 24px;
            height: 24px;
            border-radius: 9999px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s;
        }
        .note-color-swatch.selected {
            border-color: #f97316; /* orange-500 */
        }
    </style>
</head>
<body>

<div id="app" v-cloak>
    <div class="flex h-screen bg-slate-50">
        <!-- Sidebar -->
        <sidebar 
            :nav-items="navigationItems" 
            :active-panel="activePanel"
            @navigate="handleNavigation" 
            :is-open="isSidebarOpen"
            @close-sidebar="isSidebarOpen = false"
        ></sidebar>

        <!-- Conteúdo Principal -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header Mobile -->
            <header class="flex lg:hidden items-center justify-between p-4 bg-white border-b-2 border-slate-100">
                <button @click="isSidebarOpen = true" class="text-slate-500 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
                <div class="flex items-center">
                    <img src="https://raw.githubusercontent.com/moodmadu/imei-info/main/favicon-brisanet.png" alt="BrisaTel Logo" class="w-8 h-8">
                    <span class="ml-2 text-xl font-bold text-slate-800">BrisaTel</span>
                </div>
                 <div class="w-6"></div> <!-- Espaçador -->
            </header>

            <!-- Painel de Conteúdo Dinâmico -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto">
                <div class="container px-6 py-8 mx-auto">
                    <transition name="fade" mode="out-in">
                        <component :is="activePanelComponent" :key="activePanel" :title="activePanelTitle"></component>
                    </transition>
                </div>
            </main>
        </div>
    </div>
</div>

<script type="module">
    const { createApp, ref, computed, onMounted, watch } = Vue;

    //  COMPONENTES =================================================================
    //  Cada funcionalidade foi separada em seu próprio componente.

    // --- Componente: Ícone SVG ---
    const SvgIcon = {
        props: ['path'],
        template: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" :d="path"></path></svg>`
    };

    // --- Componente: Sidebar ---
    const Sidebar = {
        props: ['navItems', 'activePanel', 'isOpen'],
        emits: ['navigate', 'closeSidebar'],
        components: { SvgIcon },
        template: `
            <div v-if="isOpen" @click="$emit('closeSidebar')" class="fixed inset-0 bg-black opacity-50 z-20 lg:hidden"></div>
            <aside :class="['fixed inset-y-0 left-0 z-30 flex flex-col w-64 overflow-y-auto transition-transform duration-300 transform', isOpen ? 'translate-x-0' : '-translate-x-full', 'lg:translate-x-0 lg:static lg:inset-0']" class="bg-slate-800">
                <div class="flex items-center justify-center flex-shrink-0 mt-8">
                    <div class="flex items-center">
                        <img src="https://raw.githubusercontent.com/moodmadu/imei-info/main/favicon-brisanet.png" alt="BrisaTel Logo" class="w-10 h-10">
                        <span class="ml-3 text-2xl font-bold text-white">BrisaTel</span>
                    </div>
                </div>
                <nav class="mt-10 flex-1 px-4">
                    <div v-for="section in navItems" :key="section.title">
                        <span class="px-2 py-2 mt-4 text-xs font-bold tracking-wider text-slate-500 uppercase">{{ section.title }}</span>
                        <a v-for="item in section.items" :key="item.id" href="#" @click.prevent="$emit('navigate', item.id)" :class="['flex items-center px-4 py-3 mt-2 rounded-lg transition-colors duration-200', activePanel === item.id ? 'bg-orange-600 text-white shadow-lg' : 'text-slate-400 hover:bg-slate-700 hover:text-white']">
                            <svg-icon :path="item.iconPath" />
                            <span class="mx-4 font-medium">{{ item.name }}</span>
                        </a>
                    </div>
                </nav>
            </aside>
        `
    };
    
    // --- Componente: Card Principal (Wrapper) ---
    const MainCard = {
        props: ['title', 'subtitle'],
        template: `
            <div>
                <h3 class="text-3xl font-bold text-slate-800">{{ title }}</h3>
                <p v-if="subtitle" class="text-slate-500 mt-2 mb-4">{{ subtitle }}</p>
                <div class="mt-6 p-6 lg:p-8 bg-white rounded-xl shadow-sm border border-slate-200">
                    <slot></slot>
                </div>
            </div>
        `
    };

    // --- Componente: Botão de Ação ---
    const ActionButton = {
        props: {
            type: { type: String, default: 'button' },
            bgColorClass: { type: String, default: 'bg-orange-500 hover:bg-orange-600' },
            fullWidth: { type: Boolean, default: false },
            disabled: { type: Boolean, default: false }
        },
        template: `
            <button :type="type" :disabled="disabled" :class="[ 'inline-block px-6 py-3 mt-4 font-semibold text-white rounded-lg transition-all duration-300 shadow-md hover:shadow-xl hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500', bgColorClass, { 'w-full': fullWidth, 'opacity-50 cursor-not-allowed': disabled }]">
                <slot></slot>
            </button>
        `
    };
    
    // --- Painel Genérico (Em Construção) ---
     const GenericPanel = {
        props: ['title'],
        components: { MainCard },
        template: `<main-card :title="title"><div class="text-center"><h4 class="text-2xl font-semibold text-slate-700">Em construção</h4><p class="text-slate-500 mt-2">Esta funcionalidade incrível será implementada em breve.</p></div></main-card>`
    };

    // --- Painel: Consultar IMEI ---
    const ImeiPanel = {
        components: { MainCard, ActionButton },
        setup() {
            const imei = ref('');
            const resultMessage = ref('');
            const error = ref('');

            function handleSubmit() {
                error.value = '';
                resultMessage.value = '';

                const imeiStr = imei.value.trim();

                if (!/^\d{14,15}$/.test(imeiStr)) {
                    error.value = 'Por favor, insira um IMEI com 14 ou 15 dígitos.';
                    return;
                }

                // Função para validar o IMEI usando o algoritmo de Luhn.
                const isValidLuhn = (numStr) => {
                    if (numStr.length !== 15) return false;
                    let sum = 0;
                    let alternate = false;
                    for (let i = numStr.length - 1; i >= 0; i--) {
                        let n = parseInt(numStr.charAt(i), 10);
                        if (alternate) {
                            n *= 2;
                            if (n > 9) {
                                n = (n % 10) + 1;
                            }
                        }
                        sum += n;
                        alternate = !alternate;
                    }
                    return (sum % 10 === 0);
                };

                // Função para calcular o dígito verificador de um IMEI base (14 dígitos).
                const calculateCheckDigit = (baseNum) => {
                    if (baseNum.length !== 14) return null;
                    let sum = 0;
                    let alternate = true; // Começa dobrando o dígito mais à direita da base
                    for (let i = baseNum.length - 1; i >= 0; i--) {
                        let n = parseInt(baseNum.charAt(i), 10);
                        if (alternate) {
                            n *= 2;
                            if (n > 9) {
                                n = (n % 10) + 1;
                            }
                        }
                        sum += n;
                        alternate = !alternate;
                    }
                    return (sum * 9) % 10;
                };

                let finalImei = '';
                
                if (imeiStr.length === 15) {
                    if (isValidLuhn(imeiStr)) {
                        finalImei = imeiStr;
                        resultMessage.value = `IMEI válido: ${finalImei}. Redirecionando...`;
                    } else {
                        const base = imeiStr.slice(0, 14);
                        const checkDigit = calculateCheckDigit(base);
                        finalImei = base + checkDigit;
                        resultMessage.value = `IMEI inválido. Corrigido para: ${finalImei}. Redirecionando...`;
                    }
                } else { // se o comprimento for 14
                    const checkDigit = calculateCheckDigit(imeiStr);
                    finalImei = imeiStr + checkDigit;
                    resultMessage.value = `IMEI completado para: ${finalImei}. Redirecionando...`;
                }

                if (finalImei) {
                    window.open(`https://www.imei.info/?imei=${finalImei}`, '_blank');
                }
            }

            return { imei, resultMessage, error, handleSubmit };
        },
        template: `
            <main-card title="Consultar IMEI">
                <form @submit.prevent="handleSubmit">
                    <label class="block text-sm font-medium text-slate-600">Número do IMEI</label>
                    <input v-model="imei" type="text" placeholder="Digite o IMEI de 14 ou 15 dígitos" class="w-full px-4 py-3 mt-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-orange-500 transition" maxlength="15">
                    <action-button type="submit" :full-width="true">Validar e Consultar</action-button>
                </form>
                <div v-if="resultMessage" class="mt-6 p-4 bg-green-100 text-green-700 rounded-lg">{{ resultMessage }}</div>
                <div v-if="error" class="mt-6 p-4 bg-red-100 text-red-700 rounded-lg">{{ error }}</div>
            </main-card>
        `
    };

    // --- Painel: Consultar Dispositivo ---
    const DispositivoPanel = {
        components: { MainCard, ActionButton },
        setup() {
            const brand = ref('Samsung');
            const model = ref('');
            const brands = ['Samsung', 'Apple', 'Xiaomi', 'Motorola', 'Asus', 'Huawei', 'Realme', 'OnePlus', 'Nokia', 'Lenovo', 'LG', 'Sony', 'ZTE', 'Tecno', 'Vivo', 'Infinix', 'Oppo'];
            const searchLinks = ref([]);

            function handleSubmit() {
                if (!model.value.trim()) return;
                const modelSlug = model.value.toLowerCase().replace(/\s+/g, '-');
                const brandSlug = brand.value.toLowerCase().replace(/\s+/g, '-');
                const modelQuery = model.value.replace(/\s+/g, '+');
                searchLinks.value = [
                    { name: 'Kimovil', url: `https://www.kimovil.com/pt/onde-comprar-${brandSlug}-${modelSlug}` },
                    { name: 'MaisCelular', url: `https://www.maiscelular.com.br/fichas-tecnicas/${brandSlug}/${modelSlug}/` },
                    { name: 'GSMArena', url: `https://www.gsmarena.com/res.php3?sSearch=${modelQuery}` }
                ];
            }
            return { brand, model, brands, searchLinks, handleSubmit };
        },
        template: `
            <main-card title="Consultar Dispositivo">
                <form @submit.prevent="handleSubmit">
                    <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
                        <div>
                            <label for="brand-select" class="block text-sm font-medium text-slate-600">Marca</label>
                            <select v-model="brand" id="brand-select" class="w-full px-4 py-3 mt-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-orange-500 transition">
                                <option v-for="b in brands" :key="b" :value="b">{{ b }}</option>
                            </select>
                        </div>
                        <div>
                            <label for="model-input" class="block text-sm font-medium text-slate-600">Modelo</label>
                            <input v-model="model" id="model-input" type="text" placeholder="Ex: Galaxy S24 Ultra" class="w-full px-4 py-3 mt-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-orange-500 transition">
                        </div>
                    </div>
                    <action-button type="submit" :full-width="true">Buscar</action-button>
                </form>
                <div v-if="searchLinks.length" class="mt-8">
                    <h4 class="text-xl font-semibold text-slate-700 border-b border-slate-200 pb-3 mb-4">Opções de Pesquisa para {{ brand }} {{ model }}</h4>
                    <div class="flex flex-col md:flex-row gap-4 mt-4">
                        <a v-for="link in searchLinks" :key="link.name" :href="link.url" target="_blank" class="action-button flex-1 text-center !mt-0">{{ link.name }}</a>
                    </div>
                </div>
            </main-card>
        `
    };

    // --- Painel: Consultar Portabilidade ---
    const PortabilidadePanel = {
        components: { MainCard, ActionButton },
        setup() {
            const numero = ref('');
            const loading = ref(false);
            const result = ref(null);
            const error = ref('');

            const formattedNumero = computed({
                get: () => numero.value,
                set: (val) => {
                    let v = val.replace(/\D/g, '').slice(0, 11);
                    if (v.length > 2) v = `(${v.slice(0, 2)}) ${v.slice(2)}`;
                    if (v.length > 9) v = `${v.slice(0, 9)}-${v.slice(9)}`;
                    numero.value = v;
                }
            });

            async function handleSubmit() {
                const numOnly = numero.value.replace(/\D/g, '');
                if (numOnly.length < 10) {
                    error.value = 'Por favor, insira um número válido com DDD.';
                    return;
                }
                loading.value = true;
                result.value = null;
                error.value = '';
                try {
                    // A chamada de API real está aqui.
                    // Este endpoint é uma rede local e não funciona fora do ambiente da Brisanet.
                    // O código está preparado para a chamada real, mas pode resultar em erro de rede.
                    const response = await fetch(`http://172.26.50.141:800/operadora?num=${numOnly}`);
                    
                    if (!response.ok) {
                        // Se a API falhar, vai direto para o catch.
                        throw new Error(`Falha na consulta: ${response.status} ${response.statusText}`);
                    }
                    
                    const data = await response.json();
                    result.value = data;

                } catch (e) {
                    // Tratamento de erro de rede ou falha na API.
                    error.value = 'Não foi possível consultar o número. Verifique sua conexão ou tente novamente mais tarde.';
                    console.error("Erro ao consultar portabilidade:", e);
                } finally {
                    loading.value = false;
                }
            }

            return { formattedNumero, loading, result, error, handleSubmit };
        },
        template: `
            <main-card title="Consultar Portabilidade" subtitle="Verifique a operadora de um número de telefone.">
                <form @submit.prevent="handleSubmit">
                    <label class="block text-sm font-medium text-slate-600">Número de Telefone</label>
                    <input v-model="formattedNumero" type="text" placeholder="(XX) XXXXX-XXXX" class="w-full px-4 py-3 mt-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-orange-500 transition">
                    <action-button type="submit" :full-width="true" :disabled="loading">
                        <span v-if="!loading">Consultar</span>
                        <span v-else class="flex items-center justify-center">
                            <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                            Consultando...
                        </span>
                    </action-button>
                </form>
                <div v-if="error" class="mt-6 p-4 bg-red-100 text-red-700 rounded-lg">{{ error }}</div>
                <div v-if="result" class="mt-8 border-t pt-6">
                    <h4 class="text-xl font-semibold text-slate-700 mb-4">Resultado da Consulta</h4>
                    <ul class="space-y-3">
                        <li class="flex justify-between p-3 bg-slate-50 rounded-lg"><strong>Número:</strong> <span>{{ result.numero }}</span></li>
                        <li class="flex justify-between p-3 bg-slate-50 rounded-lg"><strong>Operadora:</strong> <span class="font-bold text-orange-600">{{ result.operadora }}</span></li>
                        <li class="flex justify-between p-3 bg-slate-50 rounded-lg"><strong>Tipo de Linha:</strong> <span>{{ result.tipo }}</span></li>
                        <li class="flex justify-between p-3 bg-slate-50 rounded-lg"><strong>Status:</strong> <span>{{ result.status }}</span></li>
                    </ul>
                </div>
            </main-card>
        `
    };

    // --- Painel: Brisa Keep (Notas) ---
    const BrisaKeepPanel = {
        components: { MainCard, ActionButton, SvgIcon },
        setup() {
            const notes = ref([]);
            const newNote = ref({ title: '', content: '', type: 'text', todos: [], color: 'bg-white', pinned: false });
            const storageKey = 'brisatel-vue-notes-enhanced';
            const colorPalette = ['bg-white', 'bg-red-200', 'bg-blue-200', 'bg-green-200', 'bg-yellow-200', 'bg-purple-200'];
            const filter = ref('');
            const showArchived = ref(false);

            onMounted(() => { notes.value = JSON.parse(localStorage.getItem(storageKey) || '[]'); });
            
            watch(notes, saveNotes, { deep: true });

            function saveNotes() { localStorage.setItem(storageKey, JSON.stringify(notes.value)); }
            
            const filteredNotes = computed(() => {
                return notes.value.filter(note => {
                    const matchesSearch = filter.value ? (note.title.toLowerCase().includes(filter.value.toLowerCase()) || note.content.toLowerCase().includes(filter.value.toLowerCase())) : true;
                    const matchesArchive = showArchived.value ? note.archived : !note.archived;
                    return matchesSearch && matchesArchive;
                }).sort((a, b) => (b.pinned - a.pinned) || (b.id - a.id));
            });

            function addNote() {
                if (newNote.value.content.trim() === '' && newNote.value.todos.every(t => t.text.trim() === '')) return;
                notes.value.unshift({ ...newNote.value, id: Date.now(), archived: false, createdAt: new Date() });
                newNote.value = { title: '', content: '', type: 'text', todos: [], color: 'bg-white', pinned: false };
            }
            function deleteNote(id) { notes.value = notes.value.filter(note => note.id !== id); }
            function togglePin(id) { const note = notes.value.find(n => n.id === id); if(note) note.pinned = !note.pinned; }
            function toggleArchive(id) { const note = notes.value.find(n => n.id === id); if(note) note.archived = !note.archived; }
            function changeColor(id, color) { const note = notes.value.find(n => n.id === id); if(note) note.color = color; }
            function addTodo() { if (newNote.value.todos.length === 0 || newNote.value.todos[newNote.value.todos.length - 1].text.trim() !== '') { newNote.value.todos.push({ text: '', done: false }); } }

            return { notes, newNote, addNote, deleteNote, colorPalette, filteredNotes, filter, togglePin, toggleArchive, changeColor, addTodo, showArchived };
        },
        template: `
            <div>
                <main-card title="Brisa Keep" subtitle="Capture ideias, crie listas e nunca se esqueça de nada.">
                    <div class="max-w-xl mx-auto">
                        <form @submit.prevent="addNote" class="bg-white p-4 rounded-lg shadow-md border">
                            <input v-model="newNote.title" type="text" placeholder="Título" class="w-full p-2 text-lg font-semibold focus:outline-none bg-transparent">
                            <div v-if="newNote.type === 'text'">
                                <textarea v-model="newNote.content" placeholder="Criar uma nota..." rows="3" class="w-full p-2 mt-2 focus:outline-none bg-transparent"></textarea>
                            </div>
                            <div v-if="newNote.type === 'list'" class="mt-2 space-y-2">
                                <div v-for="(todo, index) in newNote.todos" :key="index" class="flex items-center gap-2">
                                    <input type="checkbox" v-model="todo.done" disabled>
                                    <input v-model="todo.text" @keydown.enter.prevent="addTodo" type="text" placeholder="Item da lista" class="w-full focus:outline-none bg-transparent">
                                </div>
                                <button @click.prevent="addTodo" class="text-slate-500 hover:text-slate-800 ml-6">+ Adicionar item</button>
                            </div>
                            <div class="flex justify-between items-center mt-2">
                                <div class="flex gap-2 items-center">
                                    <button @click.prevent="newNote.type = 'text'" :class="{'bg-slate-200': newNote.type === 'text'}" class="p-2 rounded-full hover:bg-slate-100"><svg-icon path="M3 12h18M3 6h18M3 18h18" /></button>
                                    <button @click.prevent="newNote.type = 'list'" :class="{'bg-slate-200': newNote.type === 'list'}" class="p-2 rounded-full hover:bg-slate-100"><svg-icon path="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></button>
                                </div>
                                <action-button type="submit" class="!mt-0">Adicionar</action-button>
                            </div>
                        </form>
                    </div>
                </main-card>

                <div class="mt-8 flex justify-between items-center">
                    <input v-model="filter" type="text" placeholder="Buscar notas..." class="w-full md:w-1/3 px-4 py-2 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-orange-500">
                    <button @click="showArchived = !showArchived" class="px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-200">{{ showArchived ? 'Ver Ativas' : 'Ver Arquivadas' }}</button>
                </div>

                <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <div v-for="note in filteredNotes" :key="note.id" :class="[note.color, 'p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between break-words relative hover:shadow-lg transition-shadow']">
                        <div>
                            <button @click="togglePin(note.id)" class="absolute top-3 right-3 p-1 text-slate-500 hover:text-orange-500 rounded-full transition-colors">
                                <svg-icon :class="{'text-orange-500 fill-current': note.pinned}" path="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
                            </button>
                            <h4 class="text-md font-bold text-slate-800 mb-2 pr-8">{{ note.title || 'Nota sem título' }}</h4>
                            <div v-if="note.type === 'text'" class="text-sm text-slate-700 whitespace-pre-wrap">{{ note.content }}</div>
                            <div v-if="note.type === 'list'" class="space-y-2 mt-2">
                                <div v-for="(todo, i) in note.todos" :key="i" class="flex items-center gap-2">
                                    <input type="checkbox" v-model="todo.done" class="form-checkbox rounded text-orange-500">
                                    <span :class="{'line-through text-slate-500': todo.done}">{{ todo.text }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between mt-4">
                            <div class="flex gap-1">
                                <button @click.prevent="toggleArchive(note.id)" class="p-2 text-slate-500 hover:bg-slate-300/50 rounded-full"><svg-icon :path="note.archived ? 'M5 10l7-7m0 0l7 7m-7-7v18' : 'M19 9l-7 7-7-7'" /></button>
                                <button @click.prevent="deleteNote(note.id)" class="p-2 text-slate-500 hover:bg-slate-300/50 rounded-full"><svg-icon path="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></button>
                            </div>
                            <div class="text-xs text-slate-500">{{ new Date(note.createdAt).toLocaleDateString() }}</div>
                        </div>
                    </div>
                </div>
            </div>
        `
    };
    
    //  APLICAÇÃO PRINCIPAL ========================================================
    createApp({
        components: {
            Sidebar, ImeiPanel, DispositivoPanel, PortabilidadePanel, BrisaKeepPanel, GenericPanel
        },
        setup() {
            const activePanel = ref('imei');
            const isSidebarOpen = ref(false);

            const navigationItems = ref([
                {
                    title: 'Ferramentas',
                    items: [
                        { id: 'imei', name: 'Consultar IMEI', iconPath: 'M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-1.096.904-2.39.904-3.732a8 8 0 10-14.708 4.28c.16.05.32.1.48.15' },
                        { id: 'dispositivo', name: 'Consultar Dispositivo', iconPath: 'M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z' },
                        { id: 'portabilidade', name: 'Consultar Portabilidade', iconPath: 'M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4' },
                        { id: 'brisa-keep', name: 'Brisa Keep', iconPath: 'M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z' },
                    ]
                }
            ]);

            const panelMap = {
                'imei': 'ImeiPanel',
                'dispositivo': 'DispositivoPanel',
                'portabilidade': 'PortabilidadePanel',
                'brisa-keep': 'BrisaKeepPanel',
            };

            const activePanelComponent = computed(() => panelMap[activePanel.value] || 'GenericPanel');
            const activePanelTitle = computed(() => {
                for (const section of navigationItems.value) {
                    const item = section.items.find(i => i.id === activePanel.value);
                    if (item) return item.name;
                }
                return 'BrisaTel';
            });
            
            function handleNavigation(panelId) {
                activePanel.value = panelId;
                isSidebarOpen.value = false;
            }

            return { activePanel, navigationItems, handleNavigation, activePanelComponent, isSidebarOpen, activePanelTitle };
        }
    }).mount('#app');

</script>
</body>
</html>
